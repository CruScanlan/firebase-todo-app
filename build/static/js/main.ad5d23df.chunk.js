(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{31:function(e,t,n){e.exports=n.p+"static/media/pen-solid.462addfe.svg"},40:function(e,t,n){e.exports=n.p+"static/media/right-chevron.39d0c3c9.svg"},41:function(e,t,n){e.exports=n.p+"static/media/tick.1ca10308.svg"},42:function(e,t,n){e.exports=n.p+"static/media/ticked.ed9b61fc.svg"},43:function(e,t,n){e.exports=n(86)},63:function(e,t,n){},64:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){},84:function(e,t,n){},85:function(e,t,n){},86:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),s=n(24),c=n.n(s),l=n(6),r=n(20),o=n(35),d=n(21),u=n(36),m=n.n(u),h=n(26),p=n.n(h);p.a.initializeApp({apiKey:"AIzaSyBkSW3Z7mdatqXGW-IkDWiaGtS0QqJuoF4",authDomain:"fir-todo-app-36e55.firebaseapp.com",databaseURL:"https://fir-todo-app-36e55.firebaseio.com",projectId:"fir-todo-app-36e55",storageBucket:"fir-todo-app-36e55.appspot.com",messagingSenderId:"723928349232",appId:"1:723928349232:web:fd7f649c81a2dcd6"});var f=p.a.firestore(),v=p.a,g="lists_has_erroed",E="lists_is_loading",b="lists_fetch_success";function _(e){return{type:E,isLoading:e}}var I="lists_set_name",N="lists_add_list_success",k="lists_set_old";var O="list_items_has_erroed",S="list_items_is_loading",j="list_items_fetch_success";function y(e,t){return{type:S,listId:e,itemsIsLoading:t}}var w="list_items_set_completed",C="list_items_add_success";var L=Object(r.c)({lists:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return t.lists;case j:return e.map(function(e){return e.id!==t.listId?e:Object.assign({},e,{items:t.items})});case O:return e.map(function(e){return e.id!==t.listId?e:Object.assign({},e,{itemsHasErrored:t.itemsHasErrored})});case S:return e.map(function(e){return e.id!==t.listId?e:Object.assign({},e,{itemsIsLoading:t.itemsIsLoading})});case I:return e.map(function(e){return e.id!==t.listId?e:Object.assign({},e,{name:t.name})});case N:return m.a.concat(e,Object(d.a)({},t.list,{new:!0}));case k:return e.map(function(e){return e.id!==t.listId?e:Object.assign({},e,{new:!1})});case w:return e.map(function(e){return e.id!==t.listId?e:(e.items=e.items.map(function(e){return e.id!==t.itemId?e:Object.assign({},e,{completed:t.completed})}),e)});case C:return e.map(function(e){if(e.id!==t.listId)return e;var n=Object.assign({},e);return n.items.push(t.item),n});default:return e}},listsHasErrored:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return t.hasErrored;default:return e}},listsIsLoading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return t.isLoading;default:return e}}}),H=[o.a],A=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||r.d,P=Object(r.e)(L,{},A(r.a.apply(void 0,H))),R=(n(63),n(18)),T=n(19);n(64);function x(){return i.a.createElement("nav",{className:"c-navbar"},i.a.createElement(R.b,{className:"c-navbar__logo-container",to:"/"},i.a.createElement("div",{className:"c-navbar__logo"},"Firebase Todo App")))}var W=n(39),D=(n(75),function(e){var t=Object(d.a)({},e),n=e.full,a=e.small,s=e.className;["full","small"].forEach(function(e){return delete t[e]});var c="c-page-boundary";return n&&(c+=" is-full"),a&&(c+=" is-small"),s&&(c+=" ".concat(s)),i.a.createElement("div",Object.assign({},t,{className:c}),e.children)}),F=(n(76),function(e){var t,n,a=e.title,s=e.style,c=e.className,l=e.children,r=e.background,o="c-page ".concat(c||"");return a&&a.length||"home-page"===s||console.exception("This page (".concat(s||c,") does not have a title!")),t=i.a.createElement("title",null,a),r&&(n=i.a.createElement("div",{className:"c-page__background",style:{background:r}}),o+=" has-background"),i.a.createElement("div",{className:o},i.a.createElement(W.Helmet,null,t),n,l)}),B=n(11),M=n(12),U=n(14),J=n(13),X=n(15);n(77);function q(){return i.a.createElement("div",{className:"o-loader"},i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null))}var z=n(40),G=n.n(z),K=(n(78),function(e){function t(e){return Object(B.a)(this,t),Object(U.a)(this,Object(J.a)(t).call(this,e))}return Object(X.a)(t,e),Object(M.a)(t,[{key:"componentDidMount",value:function(){this.props.listsFetch()}},{key:"getRenderedLists",value:function(){return this.props.listsIsLoading?i.a.createElement("div",{className:"c-listsSection__loaderContainer"},i.a.createElement(q,null)):this.props.listsHasErrored?i.a.createElement("div",null,"Error Loading Lists"):this.props.lists.map(function(e){return e.new?i.a.createElement(T.a,{to:{pathname:"/list/".concat(e.id),state:{listName:e.name,listId:e.id,shouldEdit:!0}}}):i.a.createElement(R.b,{className:"c-listsSection__listItem",key:e.id,to:{pathname:"/list/".concat(e.id),state:{listName:e.name,listId:e.id}}},i.a.createElement("div",{className:"c-listsSection__listItem-name"},e.name),i.a.createElement("img",{className:"c-listsSection__listItem-chevron",src:G.a}))})}},{key:"render",value:function(){return i.a.createElement("section",{className:"c-listsSection"},i.a.createElement("div",{className:"c-listsSection__list"},i.a.createElement("div",{className:"c-listsSection__list-titleContainer"},i.a.createElement("h2",null,"Lists")),i.a.createElement("div",{className:"c-listsSection__list-container"},this.getRenderedLists())))}}]),t}(i.a.Component)),Q=Object(l.b)(function(e){return{lists:e.lists,listsIsLoading:e.listsIsLoading,listsHasErrored:e.listsHasErrored}},{listsFetch:function(){return function(e){e(_(!0)),f.collection("lists").get().then(function(t){var n=[];t.forEach(function(e){n.push({id:e.id,items:[],itemsHasErrored:!1,itemsIsLoading:!1,name:e.data().name})}),e(_(!1)),e(function(e){return{type:b,lists:e}}(n))}).catch(function(t){console.error(t),e({type:g,hasErrored:!0})})}}})(K),V=(n(79),function(e){function t(e){return Object(B.a)(this,t),Object(U.a)(this,Object(J.a)(t).call(this,e))}return Object(X.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("section",{className:"c-addListSection"},i.a.createElement("button",{className:"c-addListSection__button",onClick:function(){return e.props.listsAddList()}},"Add New List"))}}]),t}(i.a.Component)),Z=Object(l.b)(null,{listsAddList:function(){return function(e){f.collection("lists").add({name:""}).then(function(t){t.get().then(function(n){var a;e((a=Object(d.a)({id:t.id},n.data()),{type:N,list:a}))})}).catch(function(e){console.error(e)})}}})(V),$=(n(80),function(e){return i.a.createElement(F,{style:"listsPage",className:"p-listsPage",title:"Lists",background:"linear-gradient(40deg,#45cafc,#303f9f)"},i.a.createElement("div",{className:"p-listsPage__inner"},i.a.createElement(D,null,i.a.createElement(Q,null),i.a.createElement(Z,null))))}),Y=n(16),ee=n(31),te=n.n(ee),ne=(n(81),function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(U.a)(this,Object(J.a)(t).call(this,e))).state={editing:!!n.props.shouldEdit,name:n.props.listName},n.handlePenClick=n.handlePenClick.bind(Object(Y.a)(n)),n.handleInputChange=n.handleInputChange.bind(Object(Y.a)(n)),n.inputRef=i.a.createRef(),n}return Object(X.a)(t,e),Object(M.a)(t,[{key:"componentDidMount",value:function(){this.props.shouldEdit&&this.inputRef.current.focus()}},{key:"handlePenClick",value:function(){""!==this.state.name&&(this.setState({editing:!this.state.editing}),this.props.shouldEdit&&this.props.listsSetOld(this.props.listId),this.props.listsSetName(this.props.listId,this.state.name))}},{key:"handleInputChange",value:function(e){this.setState({name:e.target.value})}},{key:"render",value:function(){var e=this.state.editing?"c-listHeaderSection__static c-listHeaderSection__static-isInactive":"c-listHeaderSection__static",t=this.state.editing?"c-listHeaderSection__editable c-listHeaderSection__editable-isActive":"c-listHeaderSection__editable";return i.a.createElement("section",{className:"c-listHeaderSection"},i.a.createElement("div",{className:e},i.a.createElement("div",{className:"c-listHeaderSection__static-title"},i.a.createElement("h2",null,this.state.name)),i.a.createElement("img",{src:te.a,className:"c-listHeaderSection__static-pen",onClick:this.handlePenClick})),i.a.createElement("div",{className:t},i.a.createElement("form",{className:"c-listHeaderSection__editable-form",onSubmit:this.handlePenClick},i.a.createElement("input",{type:"text",className:"c-listHeaderSection__editable-title",onChange:this.handleInputChange,value:this.state.name,ref:this.inputRef,placeholder:"List Name"})),i.a.createElement("img",{src:te.a,className:"c-listHeaderSection__static-pen",onClick:this.handlePenClick})))}}]),t}(i.a.Component)),ae=Object(l.b)(null,{listsSetName:function(e,t){return f.collection("lists").doc(e).update({name:t}),{type:I,listId:e}},listsSetOld:function(e){return{type:k,listId:e}}})(ne),ie=(n(82),function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(U.a)(this,Object(J.a)(t).call(this,e))).state={name:""},n.handleNameChange=n.handleNameChange.bind(Object(Y.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(Y.a)(n)),n.inputRef=i.a.createRef(),n}return Object(X.a)(t,e),Object(M.a)(t,[{key:"componentDidMount",value:function(){this.props.shouldEdit||this.inputRef.current.focus()}},{key:"handleNameChange",value:function(e){this.props.shouldEdit||this.setState({name:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault(),""!==this.state.name&&(this.props.listItemsAdd(this.props.listId,this.state.name),this.setState({name:""}))}},{key:"render",value:function(){return i.a.createElement("section",{className:"c-addItemSection"},i.a.createElement("div",{className:"c-addItemSection__text"},i.a.createElement("h4",null,"Add Item")),i.a.createElement("form",{className:"c-addItemSection__form"},i.a.createElement("input",{className:"c-addItemSection__form-text",type:"text",name:"name",value:this.state.name,onChange:this.handleNameChange,ref:this.inputRef,placeholder:"List Item Name"}),i.a.createElement("button",{className:"c-addItemSection__form-submit",onClick:this.handleSubmit},"Add")))}}]),t}(i.a.Component)),se=Object(l.b)(null,{listItemsAdd:function(e,t){return function(n){f.collection("lists").doc(e).collection("items").add({name:t,created:v.firestore.Timestamp.now(),completed:!1}).then(function(a){n(function(e,t){return{type:C,listId:e,item:t}}(e,{id:a.id,name:t,completed:!1}))})}}})(ie),ce=n(41),le=n.n(ce),re=n(42),oe=n.n(re),de=(n(83),function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(U.a)(this,Object(J.a)(t).call(this,e))).handleTickEvent=n.handleTickEvent.bind(Object(Y.a)(n)),n}return Object(X.a)(t,e),Object(M.a)(t,[{key:"getList",value:function(){var e=this;if(this.props.lists&&0!==this.props.lists.length)return this.props.lists.find(function(t){return t.id===e.props.listId})}},{key:"componentDidMount",value:function(){this.props.listItemsFetch(this.props.listId)}},{key:"handleTickEvent",value:function(e){this.props.listItemsSetCompleted(this.props.listId,e.id,!e.completed)}},{key:"renderListItems",value:function(e){var t=this;return e.itemsIsLoading?i.a.createElement("div",{className:"c-listItemsSection__loaderContainer"},i.a.createElement(q,null)):e.itemsHasErrored?i.a.createElement("div",null,"Error loading items"):e.items?e.items.map(function(e){return i.a.createElement("div",{className:"c-listItemsSection__item",key:e.id},i.a.createElement("h5",null,e.name),t.renderTick(e))}):i.a.createElement("div",null)}},{key:"renderTick",value:function(e){var t=this;return i.a.createElement("img",{className:"c-listItemsSection__item-tick",src:e.completed?oe.a:le.a,onClick:function(){return t.handleTickEvent(e)}})}},{key:"render",value:function(){return i.a.createElement("section",{className:"c-listItemsSection"},this.renderListItems(this.getList()))}}]),t}(i.a.Component)),ue=Object(l.b)(function(e){return{lists:e.lists}},{listItemsFetch:function(e){return function(t){t(y(e,!0)),f.collection("lists").doc(e).collection("items").orderBy("created").get().then(function(n){var a=[];n.forEach(function(e){a.push({id:e.id,completed:e.data().completed,name:e.data().name,created:e.data().created})}),t(y(e,!1)),t(function(e,t){return{type:j,listId:e,items:t}}(e,a))}).catch(function(n){console.error(n),t(function(e,t){return{type:O,listId:e,itemsHasErrored:t}}(e,!0))})}},listItemsSetCompleted:function(e,t,n){return f.collection("lists").doc(e).collection("items").doc(t).update({completed:n}),{type:w,listId:e,itemId:t,completed:n}}})(de),me=(n(84),Object(T.e)(function(e){return e.location.state?i.a.createElement(F,{style:"listPage",className:"p-listPage",title:"".concat(e.location.state.listName," | List"),background:"linear-gradient(40deg,#45cafc,#303f9f)"},i.a.createElement("div",{className:"p-listPage__inner"},i.a.createElement(D,null,i.a.createElement(ae,{listName:e.location.state.listName,listId:e.match.params.listId,shouldEdit:e.location.state.shouldEdit}),i.a.createElement(se,{listId:e.match.params.listId,shouldEdit:e.location.state.shouldEdit}),i.a.createElement(ue,{listId:e.match.params.listId})))):i.a.createElement(T.a,{to:"/"})}));n(85);var he=function(){return i.a.createElement(R.a,null,i.a.createElement("div",{className:"c-app"},i.a.createElement("header",null,i.a.createElement(x,null)),i.a.createElement("main",null,i.a.createElement(T.b,{path:"/list/:listId",component:me}),i.a.createElement(T.b,{exact:!0,path:"/",component:$})),i.a.createElement("footer",null)))},pe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function fe(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}c.a.render(i.a.createElement(l.a,{store:P},i.a.createElement(he,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");pe?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):fe(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):fe(t,e)})}}()}},[[43,1,2]]]);
//# sourceMappingURL=main.ad5d23df.chunk.js.map